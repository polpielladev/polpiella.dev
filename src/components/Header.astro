---
interface Props {
  activeNav: string
}

const { activeNav } = Astro.props
import SearchBar from '@components/SearchBar.svelte'
import { getCollection } from 'astro:content'
import Social from './Social.svelte'

const posts = await getCollection('blog')

const searchables = posts.map(({ data, slug }) => {
  return {
    title: data.title,
    excerpt: data.excerpt,
    slug: slug,
  }
})
---

<header class="mb-8 mt-4 w-full">
  <div class="mx-auto flex items-center justify-between gap-4 py-4">
    <nav class="prose flex items-center gap-4 no-underline dark:prose-invert">
      <a
        class={`text-xl no-underline ${
          activeNav == 'index'
            ? 'text-gray-900 dark:text-gray-100'
            : 'text-gray-500 dark:text-gray-400'
        }`}
        href="/">
        <img
          class="w-10 h-10 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500 object-cover"
          src="/assets/profile.jpg"
          alt="Bordered avatar"
        />
      </a>
      <a
        class={`text-xl no-underline ${
          activeNav == 'newsletter'
            ? 'text-gray-900 dark:text-gray-100'
            : 'text-gray-500 dark:text-gray-400'
        }`}
        href="/newsletter">
        Newsletter
      </a>

      <a
        class={`text-xl no-underline ${
          activeNav == 'speaking'
            ? 'text-gray-900 dark:text-gray-100'
            : 'text-gray-500 dark:text-gray-400'
        }`}
        href="/speaking">
        Speaking
      </a>
    </nav>
    <div class="lg:block hidden">
      <Social />
    </div>
    <SearchBar client:idle searchables={searchables} />
  </div>
</header>
